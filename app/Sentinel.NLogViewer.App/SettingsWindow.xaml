<Window x:Class="Sentinel.NLogViewer.App.SettingsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Settings" 
        Height="450" 
        Width="600"
        WindowStartupLocation="CenterOwner"
        ResizeMode="CanResize">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- Ports Configuration -->
        <GroupBox Header="Port Configuration" Grid.Row="0" Margin="0,0,0,10">
            <Grid Margin="5">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <DataGrid x:Name="PortsDataGrid"
                          Grid.Row="1"
                          ItemsSource="{Binding Ports}"
                          SelectedItem="{Binding SelectedPort}"
                          AutoGenerateColumns="False"
                          CanUserAddRows="False"
                          CanUserDeleteRows="False"
                          Margin="0,5,0,5"
                          MinHeight="150">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Address" 
                                          Binding="{Binding Address, UpdateSourceTrigger=PropertyChanged}"
                                          Width="*" />
                        <DataGridTextColumn Header="Status" 
                                          Binding="{Binding Status}"
                                          IsReadOnly="True"
                                          Width="100" />
                    </DataGrid.Columns>
                </DataGrid>

                <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Add Port" 
                            Command="{Binding AddPortCommand}" 
                            Margin="0,0,5,0"
                            Padding="10,5"/>
                    <Button Content="Remove Port" 
                            Command="{Binding RemovePortCommand}"
                            Padding="10,5"/>
                </StackPanel>
            </Grid>
        </GroupBox>

        <!-- General Settings -->
        <GroupBox Header="General Settings" Grid.Row="1" Margin="0,0,0,10">
            <StackPanel Margin="5">
                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Language:" Grid.Column="0" VerticalAlignment="Center" />
                    <ComboBox Grid.Column="1" 
                              ItemsSource="{Binding Languages}"
                              SelectedItem="{Binding SelectedLanguage}"
                              Margin="5,0,0,0" />
                </Grid>

                <Grid Margin="0,5">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>
                    <Label Content="Max Log Entries per Tab:" Grid.Column="0" VerticalAlignment="Center" />
                    <TextBox Grid.Column="1" 
                             Text="{Binding MaxLogEntriesPerTab, UpdateSourceTrigger=PropertyChanged}"
                             Margin="5,0,0,0" />
                </Grid>

                <CheckBox Content="Auto-start listening on application start" 
                          IsChecked="{Binding AutoStartListening}"
                          Margin="0,10,0,0" />
            </StackPanel>
        </GroupBox>

        <!-- Buttons -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Content="Save" 
                    Command="{Binding SaveCommand}" 
                    IsDefault="True"
                    Margin="0,0,5,0"
                    Padding="15,5"/>
            <Button Content="Cancel" 
                    Command="{Binding CancelCommand}" 
                    IsCancel="True"
                    Padding="15,5"/>
        </StackPanel>
    </Grid>
</Window>

